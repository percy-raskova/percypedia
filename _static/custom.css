/* ============================================
   PercyBrain Blood Moon Theme
   Synced with Neovim percybrain-theme.lua
   ============================================ */

/* Blood Moon Color Palette (CSS variables for reuse) */
:root {
    /* Base */
    --blood-bg: #1a0000;
    --blood-bg-dark: #0d0000;
    --blood-bg-highlight: #2a0a0a;

    /* Text */
    --blood-fg: #e8e8e8;
    --blood-fg-dark: #b0b0b0;
    --blood-fg-gutter: #5a2020;

    /* Accents */
    --blood-gold: #ffd700;
    --blood-gold-dim: #ccaa00;
    --blood-crimson: #dc143c;
    --blood-crimson-dim: #a01028;

    /* Semantic */
    --blood-red: #ff4444;
    --blood-orange: #ff8844;
    --blood-yellow: #ffcc44;
    --blood-green: #44ff88;
    --blood-cyan: #44ccff;
    --blood-blue: #4488ff;
    --blood-purple: #cc88ff;
    --blood-magenta: #ff44cc;
}

/* ============================================
   GLOSSARY STYLING
   ============================================ */

dl.glossary dt {
    font-weight: 700;
    font-size: 1.15em;
    color: var(--blood-gold);
    border-left: 4px solid var(--blood-crimson);
    padding-left: 0.75em;
    margin-top: 1.75em;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
}

dl.glossary dd {
    background: linear-gradient(135deg, var(--blood-bg-dark) 0%, var(--blood-bg-highlight) 100%);
    border-radius: 0 8px 8px 0;
    padding: 1em 1.25em;
    margin-left: 0;
    margin-bottom: 0.5em;
    border-left: 4px solid var(--blood-bg-highlight);
    transition: all 0.2s ease;
}

dl.glossary dd:hover {
    border-left-color: var(--blood-crimson);
    background: linear-gradient(135deg, var(--blood-bg-highlight) 0%, #3a1515 100%);
    box-shadow: 0 4px 20px rgba(220, 20, 60, 0.2);
}

dl.glossary dd a {
    color: var(--blood-cyan);
    text-decoration: underline;
    text-decoration-style: dotted;
    text-underline-offset: 3px;
}

dl.glossary dd a:hover {
    color: var(--blood-gold);
    text-decoration-style: solid;
}

/* ============================================
   TERM REFERENCES (inline {term}`...`)
   ============================================ */

a.reference.internal[href*="glossary"] {
    color: var(--blood-purple);
    background: rgba(204, 136, 255, 0.1);
    padding: 1px 6px;
    border-radius: 4px;
    border-bottom: 2px solid var(--blood-purple);
    transition: all 0.15s ease;
}

a.reference.internal[href*="glossary"]:hover {
    background: var(--blood-purple);
    color: var(--blood-bg);
    text-shadow: none;
}

/* ============================================
   HEADINGS (match Neovim markdown highlights)
   ============================================ */

h1 {
    color: var(--blood-gold) !important;
    border-bottom: 3px solid var(--blood-crimson);
    padding-bottom: 0.4em;
    text-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
}

h2 {
    color: var(--blood-crimson) !important;
    border-bottom: 2px solid var(--blood-crimson-dim);
    padding-bottom: 0.3em;
}

h3 {
    color: var(--blood-orange) !important;
    border-bottom: 1px solid var(--blood-bg-highlight);
    padding-bottom: 0.25em;
}

h4 {
    color: var(--blood-yellow) !important;
}

h5 {
    color: var(--blood-cyan) !important;
}

h6 {
    color: var(--blood-purple) !important;
}

/* ============================================
   ADMONITIONS (notes, warnings, tips)
   ============================================ */

.admonition {
    border-radius: 8px;
    border-left-width: 5px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
    background: var(--blood-bg-dark) !important;
}

.admonition-title {
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.85em;
    letter-spacing: 0.08em;
}

/* Note - cyan */
.admonition.note {
    border-left-color: var(--blood-cyan);
}
.admonition.note .admonition-title {
    color: var(--blood-cyan);
}

/* Warning - orange */
.admonition.warning {
    border-left-color: var(--blood-orange);
}
.admonition.warning .admonition-title {
    color: var(--blood-orange);
}

/* Danger/Error - red */
.admonition.danger, .admonition.error {
    border-left-color: var(--blood-red);
}
.admonition.danger .admonition-title, .admonition.error .admonition-title {
    color: var(--blood-red);
}

/* Tip/Hint - green */
.admonition.tip, .admonition.hint {
    border-left-color: var(--blood-green);
}
.admonition.tip .admonition-title, .admonition.hint .admonition-title {
    color: var(--blood-green);
}

/* Important - gold */
.admonition.important {
    border-left-color: var(--blood-gold);
}
.admonition.important .admonition-title {
    color: var(--blood-gold);
}

/* ============================================
   CODE BLOCKS (match Neovim syntax)
   ============================================ */

div.highlight {
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
    border: 1px solid var(--blood-bg-highlight);
}

/* Inline code */
code.literal {
    background: var(--blood-bg-highlight) !important;
    color: var(--blood-green) !important;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
}

/* ============================================
   LINKS (match Neovim link colors)
   ============================================ */

a.reference.internal {
    transition: all 0.15s ease;
}

a.reference.internal:hover {
    color: var(--blood-gold) !important;
    text-shadow: 0 0 12px rgba(255, 215, 0, 0.5);
}

a.reference.external {
    color: var(--blood-cyan);
}

a.reference.external:hover {
    color: var(--blood-gold);
}

/* ============================================
   TABLES
   ============================================ */

table.docutils {
    border-collapse: collapse;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);
}

table.docutils th {
    background: var(--blood-bg-dark) !important;
    color: var(--blood-gold);
    border-bottom: 2px solid var(--blood-crimson);
}

table.docutils td {
    border-color: var(--blood-bg-highlight);
}

table.docutils tr:hover td {
    background: var(--blood-bg-highlight);
}

/* ============================================
   SIDEBAR ENHANCEMENTS
   ============================================ */

.sidebar-tree .current-page > .reference {
    background: var(--blood-bg-highlight);
    border-left: 3px solid var(--blood-gold);
    border-radius: 0 4px 4px 0;
    padding-left: 8px;
    margin-left: -3px;
}

/* Document links - smaller font */
.sidebar-tree .reference {
    font-size: 0.85em !important;
    color: var(--blood-gold-dim);
}

.sidebar-tree .reference:hover {
    color: var(--blood-gold) !important;
}

/* Category caption styling - larger, prominent */
.sidebar-tree .caption {
    color: var(--blood-crimson);
    font-weight: 700;
    text-transform: uppercase;
    font-size: 1.0em;
    letter-spacing: 0.08em;
    margin-top: 1.2em;
    margin-bottom: 0.4em;
    padding: 0.3em 0;
    border-bottom: 1px solid var(--blood-crimson-dim);
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.sidebar-tree .caption:first-child {
    margin-top: 0;
}

/* Collapsible indicator arrow */
.sidebar-tree .caption::after {
    content: 'â–¼';
    font-size: 0.6em;
    transition: transform 0.2s ease;
    margin-left: 0.5em;
}

/* Collapsed state */
.sidebar-tree .caption.collapsed::after {
    transform: rotate(-90deg);
}

.sidebar-tree .caption.collapsed + ul {
    display: none;
}

/* Hover effect on captions */
.sidebar-tree .caption:hover {
    color: var(--blood-gold);
    border-bottom-color: var(--blood-gold);
}

/* ============================================
   SEARCH BOX
   ============================================ */

.search-button {
    border-color: var(--blood-crimson) !important;
}

.search-button:hover {
    background: var(--blood-bg-highlight) !important;
    border-color: var(--blood-gold) !important;
}

/* ============================================
   RIGHT-HAND TOC (On This Page)
   ============================================ */

/* Increase font size for better readability */
.toc-tree {
    font-size: 0.95em;
}

.toc-tree a {
    color: var(--blood-fg-dark);
}

.toc-tree a:hover {
    color: var(--blood-gold) !important;
}

/* Replace "On this page" with something more on-brand */
.toc-title {
    font-size: 0.7em !important;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--blood-crimson) !important;
    visibility: hidden;
}

.toc-title::before {
    content: "Navigate or Perish";
    visibility: visible;
    display: block;
}

/* ============================================
   SCROLLBAR (Blood Moon style)
   ============================================ */

::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--blood-bg-dark);
}

::-webkit-scrollbar-thumb {
    background: var(--blood-crimson-dim);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--blood-crimson);
}

/* ============================================
   SELECTION HIGHLIGHT
   ============================================ */

::selection {
    background: var(--blood-gold);
    color: var(--blood-bg);
}

::-moz-selection {
    background: var(--blood-gold);
    color: var(--blood-bg);
}

/* ============================================
   ðŸš¨ ATTENTION COMRADE - OMINOUS WARNING ðŸš¨
   Accessibility be damned edition
   ============================================ */

@keyframes ominous-pulse {
    0%, 100% {
        box-shadow:
            0 0 10px var(--blood-crimson),
            0 0 20px var(--blood-crimson),
            0 0 40px var(--blood-red),
            inset 0 0 20px rgba(220, 20, 60, 0.3);
        border-color: var(--blood-crimson);
    }
    50% {
        box-shadow:
            0 0 20px var(--blood-red),
            0 0 40px var(--blood-crimson),
            0 0 80px var(--blood-red),
            0 0 120px rgba(255, 68, 68, 0.4),
            inset 0 0 40px rgba(255, 68, 68, 0.4);
        border-color: var(--blood-red);
    }
}

@keyframes text-glow {
    0%, 100% {
        text-shadow:
            0 0 10px var(--blood-gold),
            0 0 20px var(--blood-gold),
            0 0 30px var(--blood-orange);
    }
    50% {
        text-shadow:
            0 0 20px var(--blood-gold),
            0 0 40px var(--blood-gold),
            0 0 60px var(--blood-orange),
            0 0 80px var(--blood-red);
    }
}

@keyframes scan-line {
    0% {
        background-position: 0 -100%;
    }
    100% {
        background-position: 0 200%;
    }
}

@keyframes flicker {
    0%, 100% { opacity: 1; }
    92% { opacity: 1; }
    93% { opacity: 0.8; }
    94% { opacity: 1; }
    96% { opacity: 0.9; }
    97% { opacity: 1; }
}

/* The main comrade warning box */
.admonition.comrade-warning {
    border: 3px solid var(--blood-crimson);
    border-radius: 0 !important;
    background: linear-gradient(135deg, #0d0000 0%, #1a0000 50%, #2a0505 100%) !important;
    position: relative;
    /* Static glow - no animation to avoid clipping issues */
    box-shadow:
        0 0 15px var(--blood-crimson),
        0 0 30px var(--blood-crimson),
        0 0 60px var(--blood-red),
        inset 0 0 20px rgba(220, 20, 60, 0.3);
    /* Extra padding to compensate for negative title margin */
    padding-top: 0 !important;
}

/* Scan line overlay effect */
.admonition.comrade-warning::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 68, 68, 0.03) 2px,
        rgba(255, 68, 68, 0.03) 4px
    );
    pointer-events: none;
    animation: scan-line 8s linear infinite;
}

/* The title with maximum drama */
.admonition.comrade-warning .admonition-title {
    color: var(--blood-gold) !important;
    font-size: 1.1em !important;
    letter-spacing: 0.15em !important;
    text-transform: uppercase;
    font-weight: 900 !important;
    background: linear-gradient(90deg, var(--blood-crimson-dim), transparent, var(--blood-crimson-dim)) !important;
    padding: 0.6em 1em !important;
    margin: 0 0 1em 0 !important;
    border-bottom: 2px solid var(--blood-crimson);
    text-align: center;
    /* Static text glow */
    text-shadow:
        0 0 10px var(--blood-gold),
        0 0 20px var(--blood-gold),
        0 0 30px var(--blood-orange);
}

/* Emoji in title */
.admonition.comrade-warning .admonition-title::before {
    content: 'ðŸš¨ ';
}

.admonition.comrade-warning .admonition-title::after {
    content: ' ðŸš¨';
}

/* Make strong text extra menacing */
.admonition.comrade-warning strong {
    color: var(--blood-red);
    text-shadow: 0 0 10px var(--blood-red);
}

/* Italic text gets a creepy glow */
.admonition.comrade-warning em {
    color: var(--blood-orange);
    font-style: normal;
    text-shadow: 0 0 8px var(--blood-orange);
}

/* ============================================
   BOT HONEYPOT SYSTEM
   Hidden from humans, visible to scrapers
   ============================================ */

/* Hide honeypot zone from humans (bots ignore CSS) */
.bot-trap {
    position: absolute !important;
    left: -9999px !important;
    top: -9999px !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
    /* Screen readers should also skip this */
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
}

/* Extra insurance: hide on print too */
@media print {
    .bot-trap {
        display: none !important;
    }
}

/* ============================================
   HUMAN CONTACT SECTION
   Clean, accessible, click-to-copy
   ============================================ */

.contact-human {
    background: var(--blood-bg-dark);
    border-left: 4px solid var(--blood-gold);
    padding: 1.5em;
    border-radius: 0 8px 8px 0;
    margin: 1.5em 0;
}

.email-protect {
    font-family: monospace;
    font-size: 1.1em;
    color: var(--blood-cyan);
    cursor: pointer;
    padding: 4px 8px;
    background: var(--blood-bg-highlight);
    border-radius: 4px;
    transition: all 0.2s ease;
}

.email-protect:hover {
    background: var(--blood-gold);
    color: var(--blood-bg);
}

.email-protect.copied {
    background: var(--blood-green);
    color: var(--blood-bg);
}

.contact-note {
    font-size: 0.85em;
    color: var(--blood-fg-dark);
    margin-top: 0.5em;
}

/* ============================================
   HIDE THEME TOGGLE
   Force dark mode only - Blood Moon forever
   ============================================ */

/* Hide the light/dark mode toggle button (Furo theme) */
.theme-toggle,
button.theme-toggle,
.theme-toggle-container,
label.theme-toggle,
/* Target the specific Furo toggle icons */
.nav-overlay-icon,
button[title="Toggle Light / Dark / Auto color theme"] {
    display: none !important;
    visibility: hidden !important;
}

/* Force dark mode regardless of user preference */
body,
body[data-theme="light"],
body[data-theme="auto"] {
    --color-background-primary: #1a0000 !important;
    --color-background-secondary: #0d0000 !important;
    --color-background-hover: #2a0a0a !important;
    --color-foreground-primary: #e8e8e8 !important;
    --color-foreground-secondary: #b0b0b0 !important;
    --color-brand-primary: #ffd700 !important;
    --color-brand-content: #ffd700 !important;
}
